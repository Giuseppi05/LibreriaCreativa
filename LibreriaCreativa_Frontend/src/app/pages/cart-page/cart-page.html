<div>
  <div class="container my-4 overflow-hidden">
    <!-- Header del carrito -->
    <div class="row mb-3">
      <div class="col-12">
        <div class="cart-header pb-3 mb-4">
          <h2 class="color-main-text d-flex align-items-center">
            <i class="fas fa-shopping-cart me-3"></i>
            Carrito de compras
          </h2>
        </div>
      </div>
    </div>

    <!-- Contenido del carrito -->
    <div class="row" id="cart-content" *ngIf="cart.length>0">
      <!-- Tabla de productos -->
      <div class="col-lg-8 col-md-12 mb-4" id="cart-table-section">
        <div class="card shadow-sm">
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-hover mb-0">
                <thead class="bg-third">
                  <tr>
                    <th class="color-text p-3">Producto</th>
                    <th
                      class="color-text p-3 text-center d-none d-md-table-cell"
                    >
                      Precio
                    </th>
                    <th class="color-text p-3 text-center">Cantidad</th>
                    <th class="color-text p-3 text-center">Subtotal</th>
                    <th class="color-text p-3 text-center">Acción</th>
                  </tr>
                </thead>
                <tbody id="cart-products">
                  <tr *ngFor="let product of cart; let i = index">
                    <td class="p-3">
                      <div class="d-flex align-items-center">
                        <img
                          [src]="product.img"
                          [alt]="product.name"
                          class="product-image me-3"
                        />
                        <div>
                          <h6 class="mb-1 color-text">{{ product.name }}</h6>
                          <small class="text-muted">ID: {{ product.id }}</small>
                        </div>
                      </div>
                    </td>
                    <td
                      class="p-3 text-center align-middle d-none d-md-table-cell"
                    >
                      <span class="price-text color-text"
                        >S/. {{ product.price.toFixed(2) }}</span
                      >
                    </td>
                    <td class="p-3 text-center align-middle">
                      <span class="price-text color-text"
                        >{{ product.quantity }}</span
                      >
                    </td>
                    <td class="p-3 text-center align-middle">
                      <span class="price-text color-main-text"
                        >S/ {{ (product.price * product.quantity).toFixed(2)
                        }}</span
                      >
                    </td>
                    <td class="p-3 text-center align-middle">
                      <button
                        class="btn btn-sm btn-outline-danger"
                        type="button"
                        (click)="removeProduct(product.id)"
                      >
                        <i class="fas fa-trash"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- Resumen del pedido -->
      <div class="col-lg-4 col-md-12">
        <div class="card summary-card">
          <div class="card-header bg-main text-white">
            <h5 class="mb-0">
              <i class="fas fa-calculator me-2"></i>
              Resumen del pedido
            </h5>
          </div>
          <div class="card-body">
            <!-- Subtotal -->
            <div class="d-flex justify-content-between mb-3">
              <span class="color-text">SubTotal:</span>
              <span class="price-text color-text"
                >S/ {{ subtotal.toFixed(2) }}</span
              >
            </div>

            <!-- Envío -->
            <div class="d-flex justify-content-between mb-3">
              <span class="color-text">Envío:</span>
              <span class="price-text color-text"
                >S/ {{ SHIPPING_COST.toFixed(2) }}</span
              >
            </div>

            <hr class="my-3" />

            <!-- Total -->
            <div class="d-flex justify-content-between mb-4">
              <span class="h5 color-main-text">Total:</span>
              <span class="h5 price-text color-main-text"
                >S/ {{ total.toFixed(2) }}</span
              >
            </div>

            <!-- Botones de acción -->
            <div class="d-grid gap-2">
              <a
                class="btn bg-sec text-white btn-sec btn-lg"
                routerLink="/catalog"
              >
                <i class="fas fa-shopping-bag me-2"></i>
                Seguir Comprando
              </a>
              <button
                class="btn btn-main btn-lg"
                type="button"
                (click)="checkout()"
              >
                <i class="fas fa-credit-card me-2"></i>
                Finalizar Compra
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Carrito vacío -->
  <div class="row" id="empty-cart" *ngIf="cart.length == 0">
    <div class="col-12">
      <div class="text-center py-5">
        <i class="fas fa-shopping-cart fa-4x color-main-text mb-3"></i>
        <h3 class="color-text">Tu carrito está vacío</h3>
        <p class="text-muted">Agrega algunos productos para comenzar</p>
        <a class="btn bg-sec text-white btn-sec btn-lg" routerLink="/catalog">
          <i class="fas fa-shopping-bag me-2"></i>
          Ir a comprar
        </a>
      </div>
    </div>
  </div>
</div>
